<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Charadinhas</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.1/dist/mindar-image-aframe.prod.js"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Modal -->
    <button onclick="fechaModal()" class="botaoDica">Dica</button>
    <br><br>
    <div class="div-alert" style="z-index: 20;">
        <div class="alert" id="alert"></div>
    </div>

    <!-- Mindar -->
    <a-scene mindar-image="imageTargetSrc: ./targets.mind; maxTrack: 1" color-space="sRGB"
        renderer="colorManagement: true, physicallyCorrectLights" vr-mode-ui="enabled: false"
        device-orientation-permission-ui="enabled: false">
        <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
        <a-entity id="img0" mindar-image-target="targetIndex: 0"></a-entity>
        <a-entity id="img1" mindar-image-target="targetIndex: 1"></a-entity>
        <a-entity id="img2" mindar-image-target="targetIndex: 2"></a-entity>
        <a-entity id="img3" mindar-image-target="targetIndex: 3"></a-entity>
        <a-entity id="img4" mindar-image-target="targetIndex: 4"></a-entity>
        <a-entity id="img5" mindar-image-target="targetIndex: 5"></a-entity>
        <a-entity id="img6" mindar-image-target="targetIndex: 6"></a-entity>
        <a-entity id="img7" mindar-image-target="targetIndex: 7"></a-entity>
        <a-entity id="img8" mindar-image-target="targetIndex: 8"></a-entity>
        <a-entity id="img9" mindar-image-target="targetIndex: 9"></a-entity>
        <a-entity id="img10" mindar-image-target="targetIndex: 10"></a-entity>
        <a-entity id="img11" mindar-image-target="targetIndex: 11"></a-entity>
        <a-entity id="img12" mindar-image-target="targetIndex: 12"></a-entity>
        <a-entity id="img13" mindar-image-target="targetIndex: 13"></a-entity>
        <a-entity id="img14" mindar-image-target="targetIndex: 14"></a-entity>
        <a-entity id="img15" mindar-image-target="targetIndex: 15"></a-entity>
        <a-entity id="img16" mindar-image-target="targetIndex: 16"></a-entity>
        <a-entity id="img17" mindar-image-target="targetIndex: 17"></a-entity>
        <a-entity id="img18" mindar-image-target="targetIndex: 18"></a-entity>
        <a-entity id="img19" mindar-image-target="targetIndex: 19"></a-entity>
        <a-entity id="img20" mindar-image-target="targetIndex: 20"></a-entity>
        <a-entity id="img21" mindar-image-target="targetIndex: 21"></a-entity>
        <a-entity id="img22" mindar-image-target="targetIndex: 22"></a-entity>
        <a-entity id="img23" mindar-image-target="targetIndex: 23"></a-entity>
        <a-entity id="img24" mindar-image-target="targetIndex: 24"></a-entity>
        <a-entity id="img25" mindar-image-target="targetIndex: 25"></a-entity>
        <a-entity id="img26" mindar-image-target="targetIndex: 26"></a-entity>
        <a-entity id="img27" mindar-image-target="targetIndex: 27"></a-entity>
        <a-entity id="img28" mindar-image-target="targetIndex: 28"></a-entity>
        <a-entity id="img29" mindar-image-target="targetIndex: 29"></a-entity>
        <a-entity id="img30" mindar-image-target="targetIndex: 30"></a-entity>
        <a-entity id="img31" mindar-image-target="targetIndex: 31"></a-entity>
        <a-entity id="img32" mindar-image-target="targetIndex: 32"></a-entity>
        <a-entity id="img33" mindar-image-target="targetIndex: 33"></a-entity>
        <a-entity id="img34" mindar-image-target="targetIndex: 34"></a-entity>
        <a-entity id="img35" mindar-image-target="targetIndex: 35"></a-entity>
        <a-entity id="img36" mindar-image-target="targetIndex: 36"></a-entity>
        <a-entity id="img37" mindar-image-target="targetIndex: 37"></a-entity>
        <a-entity id="img38" mindar-image-target="targetIndex: 38"></a-entity>
        <a-entity id="img39" mindar-image-target="targetIndex: 39"></a-entity>
        <a-entity id="img40" mindar-image-target="targetIndex: 40"></a-entity>
        <a-entity id="img41" mindar-image-target="targetIndex: 41"></a-entity>
        <a-entity id="img42" mindar-image-target="targetIndex: 42"></a-entity>
        <a-entity id="img43" mindar-image-target="targetIndex: 43"></a-entity>
        <a-entity id="img44" mindar-image-target="targetIndex: 44"></a-entity>
        <a-entity id="img45" mindar-image-target="targetIndex: 45"></a-entity>
        <a-entity id="img46" mindar-image-target="targetIndex: 46"></a-entity>
        <a-entity id="img47" mindar-image-target="targetIndex: 47"></a-entity>
        <a-entity id="img48" mindar-image-target="targetIndex: 48"></a-entity>
        <a-entity id="img49" mindar-image-target="targetIndex: 49"></a-entity>
        <a-entity id="img50" mindar-image-target="targetIndex: 50"></a-entity>
        <a-entity id="img51" mindar-image-target="targetIndex: 51"></a-entity>
        <a-entity id="img52" mindar-image-target="targetIndex: 52"></a-entity>
        <a-entity id="img53" mindar-image-target="targetIndex: 53"></a-entity>
        <a-entity id="img54" mindar-image-target="targetIndex: 54"></a-entity>
        <a-entity id="img55" mindar-image-target="targetIndex: 55"></a-entity>
        <a-entity id="img56" mindar-image-target="targetIndex: 56"></a-entity>
        <a-entity id="img57" mindar-image-target="targetIndex: 57"></a-entity>
        <a-entity id="img58" mindar-image-target="targetIndex: 58"></a-entity>
        <a-entity id="img59" mindar-image-target="targetIndex: 59"></a-entity>
        <a-entity id="img60" mindar-image-target="targetIndex: 60"></a-entity>
        <a-entity id="img61" mindar-image-target="targetIndex: 61"></a-entity>
        <a-entity id="img62" mindar-image-target="targetIndex: 62"></a-entity>
        <a-entity id="img63" mindar-image-target="targetIndex: 63"></a-entity>
        <a-entity id="img64" mindar-image-target="targetIndex: 64"></a-entity>
        <a-entity id="img65" mindar-image-target="targetIndex: 65"></a-entity>
        <a-entity id="img66" mindar-image-target="targetIndex: 66"></a-entity>
        <a-entity id="img67" mindar-image-target="targetIndex: 67"></a-entity>
        <a-entity id="img68" mindar-image-target="targetIndex: 68"></a-entity>
        <a-entity id="img69" mindar-image-target="targetIndex: 69"></a-entity>
        <a-entity id="img70" mindar-image-target="targetIndex: 70"></a-entity>
        <a-entity id="img71" mindar-image-target="targetIndex: 71"></a-entity>
    </a-scene>

    <script>
        if (localStorage.getItem("dica")) {
            localStorage.setItem("dica", 1);
        }
        if (localStorage.getItem("vida")) {
            localStorage.setItem("vida", 3);
        }
        if (localStorage.getItem("dicaString")) {
            localStorage.setItem("dicaString", "<div class='padrao'>Bem-vindo ao enigma do milênio! Neste jogo você deve escanear imagens que são as respostas das charadas e/ou enigmas que serão propostos. A cada imagem escaneada errada, você perde uma vida! Você conta com 3 ao máximo. Tenha um bom jogo! <br>Charada: eu ilumino tudo ao meu redor, mas sem eletricidade eu sou só um objeto decorativo. O que sou eu?</div>");
        }
        
        function fechaModal() {
            var alert1 = document.getElementById('alert')
            alert1.style.opacity = '0';
        }

        function abriModal() {
            var alert1 = document.getElementById('alert')
            alert1.style.opacity = '1'
            var texto = localStorage.getItem("dicaString");
            alert1.innerHTML = "<div style='position: absolute; z-index:20; right:4px'><span class='closebtn' onclick='fechaModal()'>&times;</span></div>" + texto + "<br>Vida: " + localStorage.getItem("vida");
        }

        function reduzVida() {
            alert("Você perdeu uma vida!")
            localStorage.setItem("vida", (localStorage.getItem("vida") - 1));
            if(localStorage.getItem("vida") <= 0) {
                alert("Você perdeu!")
                localStorage.setItem("dica", 1)
                localStorage.setItem("vida", 3)
                localStorage.setItem("dicaString", "<div class='padrao'>Bem-vindo ao enigma do milênio! Neste jogo você deve escanear imagens que são as respostas das charadas e/ou enigmas que serão propostos. A cada imagem escaneada errada, você perde uma vida! Tome cuidado para não ficar sem, você conta com 3 ao máximo. Tenha um bom jogo! <br>Charada: eu ilumino tudo ao meu redor, mas sem eletricidade eu sou só um objeto decorativo. O que sou eu?</div>");
                abriModal();
            }
        }

        document.getElementById("img0").addEventListener("targetFound", event => {
            if (localStorage.getItem("dica") == 1) {
                localStorage.setItem("dicaString", "<img src='./dica2.png' alt='''>");
                localStorage.setItem("dica", 2);
                abriModal()
            } else {
                reduzVida();
            }
        })

        document.getElementById("img1").addEventListener("targetFound", event => {
            if (localStorage.getItem("dica") == 2) {
                localStorage.setItem("dicaString", "<audio id='player' controls><source src='mp-645433ecabc8b.mp3' type='audio/mp3'></audio>");
                localStorage.setItem("dica", 3);
                abriModal()
            } else {
                reduzVida();
            }
        })

        document.getElementById("img2").addEventListener("targetFound", event => {
            if (localStorage.getItem("dica") == 3) {
                localStorage.setItem("dicaString", "<img class='padrao' src='./dica4.png' alt=''>");
                localStorage.setItem("dica", 4);
                abriModal()
            } else {
                reduzVida();
            }
        })

        document.getElementById("img3").addEventListener("targetFound", event => {
            if (localStorage.getItem("dica") == 4) {
                localStorage.setItem("dicaString", "<img class='padrao' src='./dica5.png' alt=''>");
                localStorage.setItem("dica", 5);
                abriModal()
            } else {
                reduzVida();
            }
        })

        document.getElementById("img4").addEventListener("targetFound", event => {
            if (localStorage.getItem("dica") == 5) {
                localStorage.setItem("dicaString", "<img class='padrao' src='./dica6.1.png' alt=''>");
                localStorage.setItem("dica", 6);
                abriModal()
            } else {
                reduzVida();
            }
        })

        document.getElementById("img5").addEventListener("targetFound", event => {
            if (localStorage.getItem("dica") == 6) {
                localStorage.setItem("dicaString","<img class='padrao' src='./dica6.2.png' alt=''>");
                localStorage.setItem("dica", 7);
                abriModal()
            } else {
                reduzVida();
            }
        })

        document.getElementById("img6").addEventListener("targetFound", event => {
            if (localStorage.getItem("dica") == 7) {
                localStorage.setItem("dicaString", "<img class='padrao' src='./dica6.3.png' alt=''>");
                localStorage.setItem("dica", 8);
                abriModal()
            } else {
                reduzVida();
            }
        })

        document.getElementById("img7").addEventListener("targetFound", event => {
            if (localStorage.getItem("dica") == 8) {
                localStorage.setItem("dicaString", "<img class='padrao' src='./dica6.4.png' alt=''>");
                localStorage.setItem("dica", 9);
                abriModal()
            } else {
                reduzVida();
            }
        })

        document.getElementById("img8").addEventListener("targetFound", event => {
            if (localStorage.getItem("dica") == 9) {
                localStorage.setItem("dicaString", "<img class='padrao' src='./dica6.5.png' alt=''>");
                localStorage.setItem("dica", 10);
                abriModal()
            } else {
                reduzVida();
            }
        })

        document.getElementById("img9").addEventListener("targetFound", event => {
            if (localStorage.getItem("dica") == 10) {
                localStorage.setItem("dicaString", "<img class='padrao' src='./dica6.6.png' alt=''>");
                localStorage.setItem("dica", 11);
                abriModal()
            } else {
                reduzVida();
            }
        })

        document.getElementById("img10").addEventListener("targetFound", event => {
            if (localStorage.getItem("dica") == 11) {
                localStorage.setItem("dicaString", "Charada: wqbsbcfot <br>b -> a");
                localStorage.setItem("dica", 12);
                abriModal()
            } else {
                reduzVida();
            }
        })

        document.getElementById("img10").addEventListener("targetFound", event => {
            if (localStorage.getItem("dica") == 12) {
                localStorage.setItem("dicaString", "VOCÊ GANHOU!");
                abriModal()
            } else {
                reduzVida();
            }
        })

        for(let i = 0; i < 72; i++) {
            document.getElementById("img" + i).addEventListener("targetFound", event => {
                reduzVida();
            })
        }
    </script>
</body>

</html>